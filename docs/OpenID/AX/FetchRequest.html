<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OpenID::AX::FetchRequest
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OpenID::AX::FetchRequest";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OpenID.html" title="OpenID (module)">OpenID</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../AX.html" title="OpenID::AX (module)">AX</a></span></span>
     &raquo; 
    <span class="title">FetchRequest</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OpenID::AX::FetchRequest
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="AXMessage.html" title="OpenID::AX::AXMessage (class)">AXMessage</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Extension.html" title="OpenID::Extension (class)">Extension</a></span></li>
          
            <li class="next"><span class='object_link'><a href="AXMessage.html" title="OpenID::AX::AXMessage (class)">AXMessage</a></span></li>
          
            <li class="next">OpenID::AX::FetchRequest</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/openid/extensions/ax.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>An attribute exchange ‘fetch_request’ message. This message is<br />
sent by a relying party when it wishes to obtain attributes about<br />
the subject of an OpenID authentication request.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="MODE-constant" class="">MODE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fetch_request</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants inherited
     from <span class='object_link'><a href="AXMessage.html" title="OpenID::AX::AXMessage (class)">AXMessage</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="AXMessage.html#NS_URI-constant" title="OpenID::AX::AXMessage::NS_URI (constant)">AXMessage::NS_URI</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#requested_attributes-instance_method" title="#requested_attributes (instance method)">#<strong>requested_attributes</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute requested_attributes.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_url-instance_method" title="#update_url (instance method)">#<strong>update_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute update_url.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="AXMessage.html" title="OpenID::AX::AXMessage (class)">AXMessage</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="AXMessage.html#mode-instance_method" title="OpenID::AX::AXMessage#mode (method)">#mode</a></span>, <span class='object_link'><a href="AXMessage.html#ns_alias-instance_method" title="OpenID::AX::AXMessage#ns_alias (method)">#ns_alias</a></span>, <span class='object_link'><a href="AXMessage.html#ns_uri-instance_method" title="OpenID::AX::AXMessage#ns_uri (method)">#ns_uri</a></span></p>


  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_openid_request-class_method" title="from_openid_request (class method)">.<strong>from_openid_request</strong>(oidreq)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Extract a FetchRequest from an OpenID message message: OpenID::Message return a FetchRequest or nil if AX arguments are not present.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">#<strong>add</strong>(attribute)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Add an attribute to this attribute exchange request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes-instance_method" title="#attributes (instance method)">#<strong>attributes</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>return the list of AttrInfo objects contained in the FetchRequest.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_extension_args-instance_method" title="#get_extension_args (instance method)">#<strong>get_extension_args</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the serialized form of this attribute fetch request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_required_attrs-instance_method" title="#get_required_attrs (instance method)">#<strong>get_required_attrs</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the type URIs for all attributes that have been marked as required.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(update_url = nil)  &#x21d2; FetchRequest </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of FetchRequest.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#member%3F-instance_method" title="#member? (instance method)">#<strong>member?</strong>(type_uri)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_extension_args-instance_method" title="#parse_extension_args (instance method)">#<strong>parse_extension_args</strong>(ax_args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#requested_types-instance_method" title="#requested_types (instance method)">#<strong>requested_types</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>return the list of requested attribute type URIs.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Extension.html" title="OpenID::Extension (class)">Extension</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Extension.html#to_message-instance_method" title="OpenID::Extension#to_message (method)">#to_message</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(update_url = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="OpenID::AX::FetchRequest (class)">FetchRequest</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of FetchRequest.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_update_url'>update_url</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@mode</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#MODE-constant" title="OpenID::AX::FetchRequest::MODE (constant)">MODE</a></span></span>
  <span class='ivar'>@requested_attributes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@update_url</span> <span class='op'>=</span> <span class='id identifier rubyid_update_url'>update_url</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="requested_attributes-instance_method">
  
    #<strong>requested_attributes</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute requested_attributes.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requested_attributes'>requested_attributes</span>
  <span class='ivar'>@requested_attributes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="update_url=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="update_url-instance_method">
  
    #<strong>update_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute update_url.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_url'>update_url</span>
  <span class='ivar'>@update_url</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="from_openid_request-class_method">
  
    .<strong>from_openid_request</strong>(oidreq)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Extract a FetchRequest from an OpenID message<br />
message: OpenID::Message<br />
return a FetchRequest or nil if AX arguments are not present</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 185</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_from_openid_request'>from_openid_request</span><span class='lparen'>(</span><span class='id identifier rubyid_oidreq'>oidreq</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_oidreq'>oidreq</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
  <span class='id identifier rubyid_ax_args'>ax_args</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_get_args'>get_args</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="AXMessage.html#NS_URI-constant" title="OpenID::AX::AXMessage::NS_URI (constant)">NS_URI</a></span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_ax_args'>ax_args</span> <span class='op'>==</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>or</span> <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mode</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='const'><span class='object_link'><a href="#MODE-constant" title="OpenID::AX::FetchRequest::MODE (constant)">MODE</a></span></span>

  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_parse_extension_args'>parse_extension_args</span><span class='lparen'>(</span><span class='id identifier rubyid_ax_args'>ax_args</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_update_url'>update_url</span>
    <span class='id identifier rubyid_realm'>realm</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_get_arg'>get_arg</span><span class='lparen'>(</span>
      <span class='const'><span class='object_link'><a href="../../OpenID.html#OPENID_NS-constant" title="OpenID::OPENID_NS (constant)">OPENID_NS</a></span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>realm</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_get_arg'>get_arg</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../OpenID.html#OPENID_NS-constant" title="OpenID::OPENID_NS (constant)">OPENID_NS</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>return_to</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_realm'>realm</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_realm'>realm</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Error.html" title="OpenID::AX::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot validate update_url </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_update_url'>update_url</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> against absent realm</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_tr'>tr</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../TrustRoot.html" title="OpenID::TrustRoot (module)">TrustRoot</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../TrustRoot/TrustRoot.html" title="OpenID::TrustRoot::TrustRoot (class)">TrustRoot</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="../TrustRoot/TrustRoot.html#parse-class_method" title="OpenID::TrustRoot::TrustRoot.parse (method)">parse</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_realm'>realm</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_tr'>tr</span><span class='period'>.</span><span class='id identifier rubyid_validate_url'>validate_url</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_update_url'>update_url</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Error.html" title="OpenID::AX::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Update URL </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_update_url'>update_url</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> failed validation against realm </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_realm'>realm</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_req'>req</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add-instance_method">
  
    #<strong>add</strong>(attribute)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Add an attribute to this attribute exchange request.<br />
attribute: AttrInfo, the attribute being requested<br />
Raises IndexError if the requested attribute is already present<br />
  in this request.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@requested_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>IndexError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The attribute </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'> has already been requested</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@requested_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="attributes-instance_method">
  
    #<strong>attributes</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>return the list of AttrInfo objects contained in the FetchRequest</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_attributes'>attributes</span>
  <span class='ivar'>@requested_attributes</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_extension_args-instance_method">
  
    #<strong>get_extension_args</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the serialized form of this attribute fetch request.<br />
returns a hash of the arguments</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_extension_args'>get_extension_args</span>
  <span class='id identifier rubyid_aliases'>aliases</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../NamespaceMap.html" title="OpenID::NamespaceMap (class)">NamespaceMap</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../NamespaceMap.html#initialize-instance_method" title="OpenID::NamespaceMap#initialize (method)">new</a></span></span>
  <span class='id identifier rubyid_required'>required</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_if_available'>if_available</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ax_args'>ax_args</span> <span class='op'>=</span> <span class='id identifier rubyid_new_args'>new_args</span>
  <span class='ivar'>@requested_attributes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='op'>|</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_ns_alias'>ns_alias</span>
      <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_add_alias'>add_alias</span><span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_ns_alias'>ns_alias</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_required'>required</span>
      <span class='id identifier rubyid_required'>required</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_if_available'>if_available</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>count.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>!=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_type_uri'>type_uri</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>required</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_required'>required</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_required'>required</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if_available</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_if_available'>if_available</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_if_available'>if_available</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_ax_args'>ax_args</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_required_attrs-instance_method">
  
    #<strong>get_required_attrs</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the type URIs for all attributes that have been marked<br />
as required.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_required_attrs'>get_required_attrs</span>
  <span class='ivar'>@requested_attributes</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_required'>required</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='rparen'>)</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_required'>required</span>
      <span class='id identifier rubyid_required'>required</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_type_uri'>type_uri</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_required'>required</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="member?-instance_method">
  
    #<strong>member?</strong>(type_uri)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 264</span>

<span class='kw'>def</span> <span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='ivar'>@requested_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_extension_args-instance_method">
  
    #<strong>parse_extension_args</strong>(ax_args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_extension_args'>parse_extension_args</span><span class='lparen'>(</span><span class='id identifier rubyid_ax_args'>ax_args</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_check_mode'>check_mode</span><span class='lparen'>(</span><span class='id identifier rubyid_ax_args'>ax_args</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_aliases'>aliases</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../NamespaceMap.html" title="OpenID::NamespaceMap (class)">NamespaceMap</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../NamespaceMap.html#initialize-instance_method" title="OpenID::NamespaceMap#initialize (method)">new</a></span></span>

  <span class='id identifier rubyid_ax_args'>ax_args</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>

    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='int'>5</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_type_uri'>type_uri</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
    <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_add_alias'>add_alias</span><span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_count_key'>count_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>count.</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_name'>name</span>
    <span class='id identifier rubyid_count_s'>count_s</span> <span class='op'>=</span> <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='id identifier rubyid_count_key'>count_key</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>1</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_count_s'>count_s</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_count_s'>count_s</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../AX.html#UNLIMITED_VALUES-constant" title="OpenID::AX::UNLIMITED_VALUES (constant)">UNLIMITED_VALUES</a></span></span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_count_s'>count_s</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='id identifier rubyid_count_s'>count_s</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Error.html" title="OpenID::AX::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid value for count </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count_key'>count_key</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_count_s'>count_s</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="AttrInfo.html" title="OpenID::AX::AttrInfo (class)">AttrInfo</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="AttrInfo.html#initialize-instance_method" title="OpenID::AX::AttrInfo#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_required'>required</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../AX.html" title="OpenID::AX (module)">AX</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_type_uris'><span class='object_link'><a href="../AX.html#to_type_uris-class_method" title="OpenID::AX.to_type_uris (method)">to_type_uris</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_aliases'>aliases</span><span class='comma'>,</span> <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>required</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_required'>required</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='op'>|</span>
    <span class='ivar'>@requested_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_required'>required</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_if_available'>if_available</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../AX.html" title="OpenID::AX (module)">AX</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_type_uris'><span class='object_link'><a href="../AX.html#to_type_uris-class_method" title="OpenID::AX.to_type_uris (method)">to_type_uris</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_aliases'>aliases</span><span class='comma'>,</span> <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if_available</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_all_type_uris'>all_type_uris</span> <span class='op'>=</span> <span class='id identifier rubyid_required'>required</span> <span class='op'>+</span> <span class='id identifier rubyid_if_available'>if_available</span>

  <span class='id identifier rubyid_aliases'>aliases</span><span class='period'>.</span><span class='id identifier rubyid_namespace_uris'>namespace_uris</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_all_type_uris'>all_type_uris</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="Error.html" title="OpenID::AX::Error (class)">Error</a></span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Type URI </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_type_uri'>type_uri</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> was in the request but not present in &#39;required&#39; or &#39;if_available&#39;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@update_url</span> <span class='op'>=</span> <span class='id identifier rubyid_ax_args'>ax_args</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>update_url</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="requested_types-instance_method">
  
    #<strong>requested_types</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>return the list of requested attribute type URIs</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/ax.rb', line 260</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requested_types'>requested_types</span>
  <span class='ivar'>@requested_attributes</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jul  6 06:29:40 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.4).
</div>

    </div>
  </body>
</html>