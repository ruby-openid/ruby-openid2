<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: OpenID
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OpenID";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (O)</a> &raquo;
    
    
    <span class="title">OpenID</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: OpenID
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/openid/util.rb<span class="defines">,<br />
  lib/openid.rb,<br /> lib/openid/dh.rb,<br /> lib/openid/kvform.rb,<br /> lib/openid/kvpost.rb,<br /> lib/openid/server.rb,<br /> lib/openid/message.rb,<br /> lib/openid/urinorm.rb,<br /> lib/openid/version.rb,<br /> lib/openid/consumer.rb,<br /> lib/openid/fetchers.rb,<br /> lib/openid/cryptutil.rb,<br /> lib/openid/extension.rb,<br /> lib/openid/trustroot.rb,<br /> lib/openid/yadis/xri.rb,<br /> lib/openid/yadis/xrds.rb,<br /> lib/openid/association.rb,<br /> lib/openid/store/nonce.rb,<br /> lib/openid/store/memory.rb,<br /> lib/openid/yadis/accept.rb,<br /> lib/openid/yadis/xrires.rb,<br /> lib/openid/extensions/ax.rb,<br /> lib/openid/extensions/ui.rb,<br /> lib/openid/protocolerror.rb,<br /> lib/openid/yadis/filters.rb,<br /> lib/openid/consumer/idres.rb,<br /> lib/openid/store/memcache.rb,<br /> lib/openid/yadis/services.rb,<br /> lib/openid/extensions/pape.rb,<br /> lib/openid/extensions/sreg.rb,<br /> lib/openid/store/interface.rb,<br /> lib/openid/yadis/constants.rb,<br /> lib/openid/yadis/discovery.rb,<br /> lib/openid/yadis/parsehtml.rb,<br /> lib/openid/consumer/session.rb,<br /> lib/openid/extensions/oauth.rb,<br /> lib/openid/store/filesystem.rb,<br /> lib/openid/consumer/discovery.rb,<br /> lib/openid/consumer/responses.rb,<br /> lib/openid/consumer/html_parse.rb,<br /> lib/openid/consumer/checkid_request.rb,<br /> lib/openid/consumer/discovery_manager.rb,<br /> lib/openid/consumer/associationmanager.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This file contains functions and classes used for extracting<br />
endpoint information out of a Yadis XRD file using the REXML<br />
XML parser.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="OpenID/AX.html" title="OpenID::AX (module)">AX</a></span>, <span class='object_link'><a href="OpenID/CryptUtil.html" title="OpenID::CryptUtil (module)">CryptUtil</a></span>, <span class='object_link'><a href="OpenID/Nonce.html" title="OpenID::Nonce (module)">Nonce</a></span>, <span class='object_link'><a href="OpenID/OAuth.html" title="OpenID::OAuth (module)">OAuth</a></span>, <span class='object_link'><a href="OpenID/PAPE.html" title="OpenID::PAPE (module)">PAPE</a></span>, <span class='object_link'><a href="OpenID/SReg.html" title="OpenID::SReg (module)">SReg</a></span>, <span class='object_link'><a href="OpenID/Server.html" title="OpenID::Server (module)">Server</a></span>, <span class='object_link'><a href="OpenID/Store.html" title="OpenID::Store (module)">Store</a></span>, <span class='object_link'><a href="OpenID/TrustRoot.html" title="OpenID::TrustRoot (module)">TrustRoot</a></span>, <span class='object_link'><a href="OpenID/UI.html" title="OpenID::UI (module)">UI</a></span>, <span class='object_link'><a href="OpenID/URINorm.html" title="OpenID::URINorm (module)">URINorm</a></span>, <span class='object_link'><a href="OpenID/Util.html" title="OpenID::Util (module)">Util</a></span>, <span class='object_link'><a href="OpenID/Version.html" title="OpenID::Version (module)">Version</a></span>, <span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="OpenID/AssertionError.html" title="OpenID::AssertionError (class)">AssertionError</a></span>, <span class='object_link'><a href="OpenID/Association.html" title="OpenID::Association (class)">Association</a></span>, <span class='object_link'><a href="OpenID/AssociationNegotiator.html" title="OpenID::AssociationNegotiator (class)">AssociationNegotiator</a></span>, <span class='object_link'><a href="OpenID/Consumer.html" title="OpenID::Consumer (class)">Consumer</a></span>, <span class='object_link'><a href="OpenID/DiffieHellman.html" title="OpenID::DiffieHellman (class)">DiffieHellman</a></span>, <span class='object_link'><a href="OpenID/DiscoveryFailure.html" title="OpenID::DiscoveryFailure (class)">DiscoveryFailure</a></span>, <span class='object_link'><a href="OpenID/Extension.html" title="OpenID::Extension (class)">Extension</a></span>, <span class='object_link'><a href="OpenID/FetchingError.html" title="OpenID::FetchingError (class)">FetchingError</a></span>, <span class='object_link'><a href="OpenID/HTTPRedirectLimitReached.html" title="OpenID::HTTPRedirectLimitReached (class)">HTTPRedirectLimitReached</a></span>, <span class='object_link'><a href="OpenID/HTTPResponse.html" title="OpenID::HTTPResponse (class)">HTTPResponse</a></span>, <span class='object_link'><a href="OpenID/HTTPStatusError.html" title="OpenID::HTTPStatusError (class)">HTTPStatusError</a></span>, <span class='object_link'><a href="OpenID/InvalidOpenIDNamespace.html" title="OpenID::InvalidOpenIDNamespace (class)">InvalidOpenIDNamespace</a></span>, <span class='object_link'><a href="OpenID/KVFormError.html" title="OpenID::KVFormError (class)">KVFormError</a></span>, <span class='object_link'><a href="OpenID/KVPostNetworkError.html" title="OpenID::KVPostNetworkError (class)">KVPostNetworkError</a></span>, <span class='object_link'><a href="OpenID/Message.html" title="OpenID::Message (class)">Message</a></span>, <span class='object_link'><a href="OpenID/NamespaceAliasRegistrationError.html" title="OpenID::NamespaceAliasRegistrationError (class)">NamespaceAliasRegistrationError</a></span>, <span class='object_link'><a href="OpenID/NamespaceMap.html" title="OpenID::NamespaceMap (class)">NamespaceMap</a></span>, <span class='object_link'><a href="OpenID/OpenIDError.html" title="OpenID::OpenIDError (class)">OpenIDError</a></span>, <span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html" title="OpenID::OpenIDServiceEndpoint (class)">OpenIDServiceEndpoint</a></span>, <span class='object_link'><a href="OpenID/ProtocolError.html" title="OpenID::ProtocolError (class)">ProtocolError</a></span>, <span class='object_link'><a href="OpenID/RealmVerificationRedirected.html" title="OpenID::RealmVerificationRedirected (class)">RealmVerificationRedirected</a></span>, <span class='object_link'><a href="OpenID/SSLFetchingError.html" title="OpenID::SSLFetchingError (class)">SSLFetchingError</a></span>, <span class='object_link'><a href="OpenID/ServerError.html" title="OpenID::ServerError (class)">ServerError</a></span>, <span class='object_link'><a href="OpenID/StandardFetcher.html" title="OpenID::StandardFetcher (class)">StandardFetcher</a></span>, <span class='object_link'><a href="OpenID/TypeURIMismatch.html" title="OpenID::TypeURIMismatch (class)">TypeURIMismatch</a></span>, <span class='object_link'><a href="OpenID/UndefinedOpenIDNamespace.html" title="OpenID::UndefinedOpenIDNamespace (class)">UndefinedOpenIDNamespace</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="IDENTIFIER_SELECT-constant" class="">IDENTIFIER_SELECT =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://specs.openid.net/auth/2.0/identifier_select</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="SREG_URI-constant" class="">SREG_URI =
          <div class="docstring">
  <div class="discussion">
    <p>URI for Simple Registration extension, the only commonly deployed<br />
OpenID 1.x extension, and so a special case.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://openid.net/sreg/1.0</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID1_NS-constant" class="">OPENID1_NS =
          <div class="docstring">
  <div class="discussion">
    <p>The OpenID 1.x namespace URIs</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://openid.net/signon/1.0</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID11_NS-constant" class="">OPENID11_NS =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://openid.net/signon/1.1</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID1_NAMESPACES-constant" class="">OPENID1_NAMESPACES =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="#OPENID1_NS-constant" title="OpenID::OPENID1_NS (constant)">OPENID1_NS</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#OPENID11_NS-constant" title="OpenID::OPENID11_NS (constant)">OPENID11_NS</a></span></span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="OPENID2_NS-constant" class="">OPENID2_NS =
          <div class="docstring">
  <div class="discussion">
    <p>The OpenID 2.0 namespace URI</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://specs.openid.net/auth/2.0</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="NULL_NAMESPACE-constant" class="">NULL_NAMESPACE =
          <div class="docstring">
  <div class="discussion">
    <p>The namespace consisting of pairs with keys that are prefixed with<br />
“openid.” but not in another namespace.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:null_namespace</span></pre></dd>
      
        <dt id="OPENID_NS-constant" class="">OPENID_NS =
          <div class="docstring">
  <div class="discussion">
    <p>The null namespace, when it is an allowed OpenID namespace</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:openid_namespace</span></pre></dd>
      
        <dt id="BARE_NS-constant" class="">BARE_NS =
          <div class="docstring">
  <div class="discussion">
    <p>The top-level namespace, excluding all pairs with keys that start<br />
with “openid.”</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:bare_namespace</span></pre></dd>
      
        <dt id="OPENID1_URL_LIMIT-constant" class="">OPENID1_URL_LIMIT =
          <div class="docstring">
  <div class="discussion">
    <p>Limit, in bytes, of identity provider and return_to URLs,<br />
including response payload.  See OpenID 1.1 specification,<br />
Appendix D.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>2047</span></pre></dd>
      
        <dt id="OPENID_PROTOCOL_FIELDS-constant" class="">OPENID_PROTOCOL_FIELDS =
          <div class="docstring">
  <div class="discussion">
    <p>All OpenID protocol fields.  Used to check namespace aliases.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>ns</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>mode</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>error</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>return_to</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>contact</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>reference</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>signed</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>assoc_type</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>session_type</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>dh_modulus</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>dh_gen</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>dh_consumer_public</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>claimed_id</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>identity</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>realm</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>invalidate_handle</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>op_endpoint</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>response_nonce</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>sig</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>assoc_handle</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>trust_root</span><span class='words_sep'>
</span><span class='words_sep'>  </span><span class='tstring_content'>openid</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span></pre></dd>
      
        <dt id="NO_DEFAULT-constant" class="">NO_DEFAULT =
          <div class="docstring">
  <div class="discussion">
    <p>Sentinel used for Message implementation to indicate that getArg<br />
should raise an exception instead of returning a default.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:no_default</span></pre></dd>
      
        <dt id="DefaultNegotiator-constant" class="">DefaultNegotiator =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="OpenID/AssociationNegotiator.html" title="OpenID::AssociationNegotiator (class)">AssociationNegotiator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/AssociationNegotiator.html#initialize-instance_method" title="OpenID::AssociationNegotiator#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>HMAC-SHA1</span><span class='words_sep'> </span><span class='tstring_content'>DH-SHA1</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>HMAC-SHA1</span><span class='words_sep'> </span><span class='tstring_content'>no-encryption</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>HMAC-SHA256</span><span class='words_sep'> </span><span class='tstring_content'>DH-SHA256</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>HMAC-SHA256</span><span class='words_sep'> </span><span class='tstring_content'>no-encryption</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
<span class='rbracket'>]</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="EncryptedNegotiator-constant" class="">EncryptedNegotiator =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="OpenID/AssociationNegotiator.html" title="OpenID::AssociationNegotiator (class)">AssociationNegotiator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/AssociationNegotiator.html#initialize-instance_method" title="OpenID::AssociationNegotiator#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>HMAC-SHA1</span><span class='words_sep'> </span><span class='tstring_content'>DH-SHA1</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>HMAC-SHA256</span><span class='words_sep'> </span><span class='tstring_content'>DH-SHA256</span><span class='tstring_end'>]</span></span><span class='comma'>,</span>
<span class='rbracket'>]</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="OPENID_1_0_NS-constant" class="">OPENID_1_0_NS =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://openid.net/xmlns/1.0</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID_IDP_2_0_TYPE-constant" class="">OPENID_IDP_2_0_TYPE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://specs.openid.net/auth/2.0/server</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID_2_0_TYPE-constant" class="">OPENID_2_0_TYPE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://specs.openid.net/auth/2.0/signon</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID_1_1_TYPE-constant" class="">OPENID_1_1_TYPE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://openid.net/signon/1.1</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID_1_0_TYPE-constant" class="">OPENID_1_0_TYPE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://openid.net/signon/1.0</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="OPENID_1_0_MESSAGE_NS-constant" class="">OPENID_1_0_MESSAGE_NS =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#OPENID1_NS-constant" title="OpenID::OPENID1_NS (constant)">OPENID1_NS</a></span></span></pre></dd>
      
        <dt id="OPENID_2_0_MESSAGE_NS-constant" class="">OPENID_2_0_MESSAGE_NS =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#OPENID2_NS-constant" title="OpenID::OPENID2_NS (constant)">OPENID2_NS</a></span></span></pre></dd>
      
        <dt id="REMOVED_RE-constant" class="">REMOVED_RE =
          <div class="docstring">
  <div class="discussion">
    <p>Stuff to remove before we start looking for tags</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>
  # Comments
  &lt;!--.*?--&gt;

  # CDATA blocks
| &lt;!\[CDATA\[.*?\]\]&gt;

  # script blocks
| &lt;script\b

  # make sure script is not an XML namespace
  (?!:)

  [^&gt;]*&gt;.*?&lt;/script&gt;

</span><span class='regexp_end'>}mix</span></span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#arrange_by_type-class_method" title="arrange_by_type (class method)">.<strong>arrange_by_type</strong>(service_list, preferred_types)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#best_matching_service-class_method" title="best_matching_service (class method)">.<strong>best_matching_service</strong>(service, preferred_types)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_sreg_field_name-class_method" title="check_sreg_field_name (class method)">.<strong>check_sreg_field_name</strong>(fieldname)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>raise ArgumentError if fieldname is not in the defined sreg fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discover-class_method" title="discover (class method)">.<strong>discover</strong>(identifier)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discover_no_yadis-class_method" title="discover_no_yadis (class method)">.<strong>discover_no_yadis</strong>(uri)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discover_uri-class_method" title="discover_uri (class method)">.<strong>discover_uri</strong>(uri)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discover_xri-class_method" title="discover_xri (class method)">.<strong>discover_xri</strong>(iname)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discover_yadis-class_method" title="discover_yadis (class method)">.<strong>discover_yadis</strong>(uri)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-class_method" title="fetch (class method)">.<strong>fetch</strong>(url, body = nil, headers = nil, redirect_limit = StandardFetcher::REDIRECT_LIMIT)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetcher-class_method" title="fetcher (class method)">.<strong>fetcher</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetcher=-class_method" title="fetcher= (class method)">.<strong>fetcher=</strong>(fetcher)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetcher_use_env_http_proxy-class_method" title="fetcher_use_env_http_proxy (class method)">.<strong>fetcher_use_env_http_proxy</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the default fetcher to use the HTTP proxy defined in the environment variable ‘http_proxy’.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_first_href-class_method" title="find_first_href (class method)">.<strong>find_first_href</strong>(link_attrs_list, target_rel)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_links_rel-class_method" title="find_links_rel (class method)">.<strong>find_links_rel</strong>(link_attrs_list, target_rel)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_op_local_identifier-class_method" title="find_op_local_identifier (class method)">.<strong>find_op_local_identifier</strong>(service_element, type_uris)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_op_or_user_services-class_method" title="get_op_or_user_services (class method)">.<strong>get_op_or_user_services</strong>(openid_services)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_secret_size-class_method" title="get_secret_size (class method)">.<strong>get_secret_size</strong>(assoc_type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_sreg_ns-class_method" title="get_sreg_ns (class method)">.<strong>get_sreg_ns</strong>(message)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Extract the simple registration namespace URI from the given OpenID message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#link_has_rel-class_method" title="link_has_rel (class method)">.<strong>link_has_rel</strong>(link_attrs, target_rel)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#make_kv_post-class_method" title="make_kv_post (class method)">.<strong>make_kv_post</strong>(request_message, server_url)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Send the message to the server via HTTP POST and receive and parse a response in KV Form.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_url-class_method" title="normalize_url (class method)">.<strong>normalize_url</strong>(url)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_xri-class_method" title="normalize_xri (class method)">.<strong>normalize_xri</strong>(xri)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#openid_unescape-class_method" title="openid_unescape (class method)">.<strong>openid_unescape</strong>(s)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_link_attrs-class_method" title="parse_link_attrs (class method)">.<strong>parse_link_attrs</strong>(html)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rel_matches-class_method" title="rel_matches (class method)">.<strong>rel_matches</strong>(rel_attr, target_rel)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#supports_sreg%3F-class_method" title="supports_sreg? (class method)">.<strong>supports_sreg?</strong>(endpoint)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Does the given endpoint advertise support for simple registration?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape_hash-class_method" title="unescape_hash (class method)">.<strong>unescape_hash</strong>(h)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="arrange_by_type-class_method">
  
    .<strong>arrange_by_type</strong>(service_list, preferred_types)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 348</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_arrange_by_type'>arrange_by_type</span><span class='lparen'>(</span><span class='id identifier rubyid_service_list'>service_list</span><span class='comma'>,</span> <span class='id identifier rubyid_preferred_types'>preferred_types</span><span class='rparen'>)</span>
  <span class='comment'># Rearrange service_list in a new list so services are ordered by
</span>  <span class='comment'># types listed in preferred_types.  Return the new list.
</span>
  <span class='comment'># Build a list with the service elements in tuples whose
</span>  <span class='comment'># comparison will prefer the one with the best matching service
</span>  <span class='id identifier rubyid_prio_services'>prio_services</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_service_list'>service_list</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='id identifier rubyid_prio_services'>prio_services</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_best_matching_service'>best_matching_service</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_preferred_types'>preferred_types</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span> <span class='id identifier rubyid_s'>s</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_prio_services'>prio_services</span><span class='period'>.</span><span class='id identifier rubyid_sort!'>sort!</span>

  <span class='comment'># Now that the services are sorted by priority, remove the sort
</span>  <span class='comment'># keys from the list.
</span>  <span class='lparen'>(</span><span class='int'>0</span><span class='op'>...</span><span class='id identifier rubyid_prio_services'>prio_services</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_prio_services'>prio_services</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_prio_services'>prio_services</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_prio_services'>prio_services</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="best_matching_service-class_method">
  
    .<strong>best_matching_service</strong>(service, preferred_types)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337
338
339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 333</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_best_matching_service'>best_matching_service</span><span class='lparen'>(</span><span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='id identifier rubyid_preferred_types'>preferred_types</span><span class='rparen'>)</span>
  <span class='comment'># Return the index of the first matching type, or something higher
</span>  <span class='comment'># if no type matches.
</span>  <span class='comment'>#
</span>  <span class='comment'># This provides an ordering in which service elements that contain
</span>  <span class='comment'># a type that comes earlier in the preferred types list come
</span>  <span class='comment'># before service elements that come later. If a service element
</span>  <span class='comment'># has more than one type, the most preferred one wins.
</span>  <span class='id identifier rubyid_preferred_types'>preferred_types</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_index'>index</span> <span class='kw'>if</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_type_uris'>type_uris</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_preferred_types'>preferred_types</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="check_sreg_field_name-class_method">
  
    .<strong>check_sreg_field_name</strong>(fieldname)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>raise ArgumentError if fieldname is not in the defined sreg fields</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/sreg.rb', line 30</span>

<span class='kw'>def</span> <span class='const'><span class='object_link'><a href="" title="OpenID (module)">OpenID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_check_sreg_field_name'>check_sreg_field_name</span><span class='lparen'>(</span><span class='id identifier rubyid_fieldname'>fieldname</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'>DATA_FIELDS</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_fieldname'>fieldname</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fieldname'>fieldname</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a defined simple registration field</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discover-class_method">
  
    .<strong>discover</strong>(identifier)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


509
510
511
512
513
514
515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 509</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discover'>discover</span><span class='lparen'>(</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRI.html" title="OpenID::Yadis::XRI (module)">XRI</a></span></span><span class='period'>.</span><span class='id identifier rubyid_identifier_scheme'><span class='object_link'><a href="OpenID/Yadis/XRI.html#identifier_scheme-class_method" title="OpenID::Yadis::XRI.identifier_scheme (method)">identifier_scheme</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='symbol'>:xri</span>
    <span class='id identifier rubyid_discover_xri'>discover_xri</span><span class='lparen'>(</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_discover_uri'>discover_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_identifier'>identifier</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discover_no_yadis-class_method">
  
    .<strong>discover_no_yadis</strong>(uri)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 470</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discover_no_yadis'>discover_no_yadis</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_http_resp'>http_resp</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="OpenID (module)">OpenID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_fetch'><span class='object_link'><a href="#fetch-class_method" title="OpenID.fetch (method)">fetch</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_http_resp'>http_resp</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>and</span> <span class='id identifier rubyid_http_resp'>http_resp</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>206</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/DiscoveryFailure.html" title="OpenID::DiscoveryFailure (class)">DiscoveryFailure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/DiscoveryFailure.html#initialize-instance_method" title="OpenID::DiscoveryFailure#initialize (method)">new</a></span></span><span class='lparen'>(</span>
      <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>HTTP Response status from identity URL host is not &quot;200&quot;. </span><span class='tstring_end'>&#39;</span></span> \
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Got status </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_http_resp'>http_resp</span><span class='period'>.</span><span class='id identifier rubyid_code'>code</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='id identifier rubyid_http_resp'>http_resp</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_claimed_id'>claimed_id</span> <span class='op'>=</span> <span class='id identifier rubyid_http_resp'>http_resp</span><span class='period'>.</span><span class='id identifier rubyid_final_url'>final_url</span>
  <span class='id identifier rubyid_openid_services'>openid_services</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html" title="OpenID::OpenIDServiceEndpoint (class)">OpenIDServiceEndpoint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_html'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html#from_html-class_method" title="OpenID::OpenIDServiceEndpoint.from_html (method)">from_html</a></span></span><span class='lparen'>(</span>
    <span class='id identifier rubyid_claimed_id'>claimed_id</span><span class='comma'>,</span> <span class='id identifier rubyid_http_resp'>http_resp</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span>
  <span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_claimed_id'>claimed_id</span><span class='comma'>,</span> <span class='id identifier rubyid_openid_services'>openid_services</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discover_uri-class_method">
  
    .<strong>discover_uri</strong>(uri)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 487</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discover_uri'>discover_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='comment'># Hack to work around URI parsing for URls with *no* scheme.
</span>  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_uri'>uri</span> <span class='kw'>if</span> <span class='id identifier rubyid_uri'>uri</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>://</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_parsed'>parsed</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>URI</span><span class='op'>::</span><span class='const'>InvalidURIError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/DiscoveryFailure.html" title="OpenID::DiscoveryFailure (class)">DiscoveryFailure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/DiscoveryFailure.html#initialize-instance_method" title="OpenID::DiscoveryFailure#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>URI is not valid: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_parsed'>parsed</span><span class='period'>.</span><span class='id identifier rubyid_scheme'>scheme</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>and</span> <span class='op'>!</span><span class='id identifier rubyid_parsed'>parsed</span><span class='period'>.</span><span class='id identifier rubyid_scheme'>scheme</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='qwords_beg'>%w[</span><span class='tstring_content'>http</span><span class='words_sep'> </span><span class='tstring_content'>https</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_parsed'>parsed</span><span class='period'>.</span><span class='id identifier rubyid_scheme'>scheme</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/DiscoveryFailure.html" title="OpenID::DiscoveryFailure (class)">DiscoveryFailure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/DiscoveryFailure.html#initialize-instance_method" title="OpenID::DiscoveryFailure#initialize (method)">new</a></span></span><span class='lparen'>(</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>URI scheme </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_parsed'>parsed</span><span class='period'>.</span><span class='id identifier rubyid_scheme'>scheme</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not HTTP or HTTPS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_uri'>uri</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_url'>normalize_url</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_claimed_id'>claimed_id</span><span class='comma'>,</span> <span class='id identifier rubyid_openid_services'>openid_services</span> <span class='op'>=</span> <span class='id identifier rubyid_discover_yadis'>discover_yadis</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_claimed_id'>claimed_id</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_url'>normalize_url</span><span class='lparen'>(</span><span class='id identifier rubyid_claimed_id'>claimed_id</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id identifier rubyid_claimed_id'>claimed_id</span><span class='comma'>,</span> <span class='id identifier rubyid_openid_services'>openid_services</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discover_xri-class_method">
  
    .<strong>discover_xri</strong>(iname)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 440</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discover_xri'>discover_xri</span><span class='lparen'>(</span><span class='id identifier rubyid_iname'>iname</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoints'>endpoints</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_iname'>iname</span> <span class='op'>=</span> <span class='id identifier rubyid_normalize_xri'>normalize_xri</span><span class='lparen'>(</span><span class='id identifier rubyid_iname'>iname</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_canonical_id'>canonical_id</span><span class='comma'>,</span> <span class='id identifier rubyid_services'>services</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRI.html" title="OpenID::Yadis::XRI (module)">XRI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRI/ProxyResolver.html" title="OpenID::Yadis::XRI::ProxyResolver (class)">ProxyResolver</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/Yadis/XRI/ProxyResolver.html#initialize-instance_method" title="OpenID::Yadis::XRI::ProxyResolver#initialize (method)">new</a></span></span><span class='period'>.</span><span class='id identifier rubyid_query'><span class='object_link'><a href="OpenID/Yadis/XRI/ProxyResolver.html#query-instance_method" title="OpenID::Yadis::XRI::ProxyResolver#query (method)">query</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_iname'>iname</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRDSError.html" title="OpenID::Yadis::XRDSError (class)">XRDSError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No CanonicalID found for XRI %s</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_iname'>iname</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_canonical_id'>canonical_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='id identifier rubyid_flt'>flt</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='period'>.</span><span class='id identifier rubyid_make_filter'><span class='object_link'><a href="OpenID/Yadis.html#make_filter-class_method" title="OpenID::Yadis.make_filter (method)">make_filter</a></span></span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html" title="OpenID::OpenIDServiceEndpoint (class)">OpenIDServiceEndpoint</a></span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_services'>services</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_service_element'>service_element</span><span class='op'>|</span>
      <span class='id identifier rubyid_endpoints'>endpoints</span> <span class='op'>+=</span> <span class='id identifier rubyid_flt'>flt</span><span class='period'>.</span><span class='id identifier rubyid_get_service_endpoints'>get_service_endpoints</span><span class='lparen'>(</span><span class='id identifier rubyid_iname'>iname</span><span class='comma'>,</span> <span class='id identifier rubyid_service_element'>service_element</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRDSError.html" title="OpenID::Yadis::XRDSError (class)">XRDSError</a></span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRI.html" title="OpenID::Yadis::XRI (module)">XRI</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRI/XRIHTTPError.html" title="OpenID::Yadis::XRI::XRIHTTPError (class)">XRIHTTPError</a></span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='const'><span class='object_link'><a href="OpenID/Util.html" title="OpenID::Util (module)">Util</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'><span class='object_link'><a href="OpenID/Util.html#log-class_method" title="OpenID::Util.log (method)">log</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xrds error on </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_iname'>iname</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_endpoints'>endpoints</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_endpoint'>endpoint</span><span class='op'>|</span>
    <span class='comment'># Is there a way to pass this through the filter to the endpoint
</span>    <span class='comment'># constructor instead of tacking it on after?
</span>    <span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_canonical_id'>canonical_id</span> <span class='op'>=</span> <span class='id identifier rubyid_canonical_id'>canonical_id</span>
    <span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_claimed_id'>claimed_id</span> <span class='op'>=</span> <span class='id identifier rubyid_canonical_id'>canonical_id</span>
    <span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_display_identifier'>display_identifier</span> <span class='op'>=</span> <span class='id identifier rubyid_iname'>iname</span>
  <span class='kw'>end</span>

  <span class='comment'># FIXME: returned xri should probably be in some normal form
</span>  <span class='lbracket'>[</span><span class='id identifier rubyid_iname'>iname</span><span class='comma'>,</span> <span class='id identifier rubyid_get_op_or_user_services'>get_op_or_user_services</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoints'>endpoints</span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discover_yadis-class_method">
  
    .<strong>discover_yadis</strong>(uri)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 394</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_discover_yadis'>discover_yadis</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='comment'># Discover OpenID services for a URI. Tries Yadis and falls back
</span>  <span class='comment'># on old-style &lt;link rel=&#39;...&#39;&gt; discovery if Yadis fails.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param uri: normalized identity URL
</span>  <span class='comment'># @type uri: str
</span>  <span class='comment'>#
</span>  <span class='comment'># @return: (claimed_id, services)
</span>  <span class='comment'># @rtype: (str, list(OpenIDServiceEndpoint))
</span>  <span class='comment'>#
</span>  <span class='comment'># @raises DiscoveryFailure: when discovery fails.
</span>
  <span class='comment'># Might raise a yadis.discover.DiscoveryFailure if no document
</span>  <span class='comment'># came back for that URI at all.  I don&#39;t think falling back to
</span>  <span class='comment'># OpenID 1.0 discovery on the same URL will help, so don&#39;t bother
</span>  <span class='comment'># to catch it.
</span>  <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='period'>.</span><span class='id identifier rubyid_discover'><span class='object_link'><a href="OpenID/Yadis.html#discover-class_method" title="OpenID::Yadis.discover (method)">discover</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_yadis_url'>yadis_url</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_normalized_uri'>normalized_uri</span>
  <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_response_text'>response_text</span>

  <span class='kw'>begin</span>
    <span class='id identifier rubyid_openid_services'>openid_services</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html" title="OpenID::OpenIDServiceEndpoint (class)">OpenIDServiceEndpoint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_xrds'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html#from_xrds-class_method" title="OpenID::OpenIDServiceEndpoint.from_xrds (method)">from_xrds</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_yadis_url'>yadis_url</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis/XRDSError.html" title="OpenID::Yadis::XRDSError (class)">XRDSError</a></span></span>
    <span class='comment'># Does not parse as a Yadis XRDS file
</span>    <span class='id identifier rubyid_openid_services'>openid_services</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_openid_services'>openid_services</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='comment'># Either not an XRDS or there are no OpenID services.
</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_is_xrds'>is_xrds</span>
      <span class='comment'># if we got the Yadis content-type or followed the Yadis
</span>      <span class='comment'># header, re-fetch the document without following the Yadis
</span>      <span class='comment'># header, with no Accept header.
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_discover_no_yadis'>discover_no_yadis</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Try to parse the response as HTML.
</span>    <span class='comment'># &lt;link rel=&quot;...&quot;&gt;
</span>    <span class='id identifier rubyid_openid_services'>openid_services</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html" title="OpenID::OpenIDServiceEndpoint (class)">OpenIDServiceEndpoint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_html'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html#from_html-class_method" title="OpenID::OpenIDServiceEndpoint.from_html (method)">from_html</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_yadis_url'>yadis_url</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='lbracket'>[</span><span class='id identifier rubyid_yadis_url'>yadis_url</span><span class='comma'>,</span> <span class='id identifier rubyid_get_op_or_user_services'>get_op_or_user_services</span><span class='lparen'>(</span><span class='id identifier rubyid_openid_services'>openid_services</span><span class='rparen'>)</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch-class_method">
  
    .<strong>fetch</strong>(url, body = nil, headers = nil, redirect_limit = StandardFetcher::REDIRECT_LIMIT)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/fetchers.rb', line 94</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='id identifier rubyid_redirect_limit'>redirect_limit</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/StandardFetcher.html" title="OpenID::StandardFetcher (class)">StandardFetcher</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/StandardFetcher.html#REDIRECT_LIMIT-constant" title="OpenID::StandardFetcher::REDIRECT_LIMIT (constant)">REDIRECT_LIMIT</a></span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fetcher'>fetcher</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='id identifier rubyid_redirect_limit'>redirect_limit</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetcher-class_method">
  
    .<strong>fetcher</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/fetchers.rb', line 99</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fetcher'>fetcher</span>
  <span class='ivar'>@fetcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/StandardFetcher.html" title="OpenID::StandardFetcher (class)">StandardFetcher</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/StandardFetcher.html#initialize-instance_method" title="OpenID::StandardFetcher#initialize (method)">new</a></span></span> <span class='kw'>if</span> <span class='ivar'>@fetcher</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='ivar'>@fetcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetcher=-class_method">
  
    .<strong>fetcher=</strong>(fetcher)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/fetchers.rb', line 105</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fetcher='>fetcher=</span><span class='lparen'>(</span><span class='id identifier rubyid_fetcher'>fetcher</span><span class='rparen'>)</span>
  <span class='ivar'>@fetcher</span> <span class='op'>=</span> <span class='id identifier rubyid_fetcher'>fetcher</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetcher_use_env_http_proxy-class_method">
  
    .<strong>fetcher_use_env_http_proxy</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set the default fetcher to use the HTTP proxy defined in the environment<br />
variable ‘http_proxy’.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/fetchers.rb', line 111</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fetcher_use_env_http_proxy'>fetcher_use_env_http_proxy</span>
  <span class='id identifier rubyid_proxy_string'>proxy_string</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http_proxy</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_proxy_string'>proxy_string</span>

  <span class='id identifier rubyid_proxy_uri'>proxy_uri</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_proxy_string'>proxy_string</span><span class='rparen'>)</span>
  <span class='ivar'>@fetcher</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/StandardFetcher.html" title="OpenID::StandardFetcher (class)">StandardFetcher</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/StandardFetcher.html#initialize-instance_method" title="OpenID::StandardFetcher#initialize (method)">new</a></span></span><span class='lparen'>(</span>
    <span class='id identifier rubyid_proxy_uri'>proxy_uri</span><span class='period'>.</span><span class='id identifier rubyid_host'>host</span><span class='comma'>,</span>
    <span class='id identifier rubyid_proxy_uri'>proxy_uri</span><span class='period'>.</span><span class='id identifier rubyid_port'>port</span><span class='comma'>,</span>
    <span class='id identifier rubyid_proxy_uri'>proxy_uri</span><span class='period'>.</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span>
    <span class='id identifier rubyid_proxy_uri'>proxy_uri</span><span class='period'>.</span><span class='id identifier rubyid_password'>password</span><span class='comma'>,</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_first_href-class_method">
  
    .<strong>find_first_href</strong>(link_attrs_list, target_rel)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 131</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_first_href'>find_first_href</span><span class='lparen'>(</span><span class='id identifier rubyid_link_attrs_list'>link_attrs_list</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span>
  <span class='comment'># Return the value of the href attribute for the first link tag in
</span>  <span class='comment'># the list that has target_rel as a relationship.
</span>
  <span class='comment'># XXX: TESTME
</span>  <span class='id identifier rubyid_matches'>matches</span> <span class='op'>=</span> <span class='id identifier rubyid_find_links_rel'>find_links_rel</span><span class='lparen'>(</span><span class='id identifier rubyid_link_attrs_list'>link_attrs_list</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_matches'>matches</span> <span class='kw'>or</span> <span class='id identifier rubyid_matches'>matches</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

  <span class='id identifier rubyid_first'>first</span> <span class='op'>=</span> <span class='id identifier rubyid_matches'>matches</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_first'>first</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>href</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_links_rel-class_method">
  
    .<strong>find_links_rel</strong>(link_attrs_list, target_rel)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 116</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_links_rel'>find_links_rel</span><span class='lparen'>(</span><span class='id identifier rubyid_link_attrs_list'>link_attrs_list</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span>
  <span class='comment'># Filter the list of link attributes on whether it has target_rel
</span>  <span class='comment'># as a relationship.
</span>
  <span class='comment'># XXX: TESTME
</span>  <span class='id identifier rubyid_matches_target'>matches_target</span> <span class='op'>=</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_link_has_rel'>link_has_rel</span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_link_attrs_list'>link_attrs_list</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_item'>item</span><span class='op'>|</span>
    <span class='id identifier rubyid_result'>result</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_item'>item</span> <span class='kw'>if</span> <span class='id identifier rubyid_matches_target'>matches_target</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_item'>item</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_op_local_identifier-class_method">
  
    .<strong>find_op_local_identifier</strong>(service_element, type_uris)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 265</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_op_local_identifier'>find_op_local_identifier</span><span class='lparen'>(</span><span class='id identifier rubyid_service_element'>service_element</span><span class='comma'>,</span> <span class='id identifier rubyid_type_uris'>type_uris</span><span class='rparen'>)</span>
  <span class='comment'># Find the OP-Local Identifier for this xrd:Service element.
</span>  <span class='comment'>#
</span>  <span class='comment'># This considers openid:Delegate to be a synonym for xrd:LocalID
</span>  <span class='comment'># if both OpenID 1.X and OpenID 2.0 types are present. If only
</span>  <span class='comment'># OpenID 1.X is present, it returns the value of
</span>  <span class='comment'># openid:Delegate. If only OpenID 2.0 is present, it returns the
</span>  <span class='comment'># value of xrd:LocalID. If there is more than one LocalID tag and
</span>  <span class='comment'># the values are different, it raises a DiscoveryFailure. This is
</span>  <span class='comment'># also triggered when the xrd:LocalID and openid:Delegate tags are
</span>  <span class='comment'># different.
</span>
  <span class='comment'># XXX: Test this function on its own!
</span>
  <span class='comment'># Build the list of tags that could contain the OP-Local
</span>  <span class='comment'># Identifier
</span>  <span class='id identifier rubyid_local_id_tags'>local_id_tags</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_type_uris'>type_uris</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#OPENID_1_1_TYPE-constant" title="OpenID::OPENID_1_1_TYPE (constant)">OPENID_1_1_TYPE</a></span></span><span class='rparen'>)</span> <span class='kw'>or</span>
      <span class='id identifier rubyid_type_uris'>type_uris</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#OPENID_1_0_TYPE-constant" title="OpenID::OPENID_1_0_TYPE (constant)">OPENID_1_0_TYPE</a></span></span><span class='rparen'>)</span>
    <span class='comment'># local_id_tags &lt;&lt; Yadis::nsTag(OPENID_1_0_NS, &#39;openid&#39;, &#39;Delegate&#39;)
</span>    <span class='id identifier rubyid_service_element'>service_element</span><span class='period'>.</span><span class='id identifier rubyid_add_namespace'>add_namespace</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>openid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="#OPENID_1_0_NS-constant" title="OpenID::OPENID_1_0_NS (constant)">OPENID_1_0_NS</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_local_id_tags'>local_id_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>openid:Delegate</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_type_uris'>type_uris</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#OPENID_2_0_TYPE-constant" title="OpenID::OPENID_2_0_TYPE (constant)">OPENID_2_0_TYPE</a></span></span><span class='rparen'>)</span>
    <span class='comment'># local_id_tags.append(Yadis::nsTag(XRD_NS_2_0, &#39;xrd&#39;, &#39;LocalID&#39;))
</span>    <span class='id identifier rubyid_service_element'>service_element</span><span class='period'>.</span><span class='id identifier rubyid_add_namespace'>add_namespace</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xrd</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="OpenID/Yadis.html" title="OpenID::Yadis (module)">Yadis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/Yadis.html#XRD_NS_2_0-constant" title="OpenID::Yadis::XRD_NS_2_0 (constant)">XRD_NS_2_0</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_local_id_tags'>local_id_tags</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>xrd:LocalID</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Walk through all the matching tags and make sure that they all
</span>  <span class='comment'># have the same value
</span>  <span class='id identifier rubyid_local_id'>local_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_local_id_tags'>local_id_tags</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_local_id_tag'>local_id_tag</span><span class='op'>|</span>
    <span class='id identifier rubyid_service_element'>service_element</span><span class='period'>.</span><span class='id identifier rubyid_each_element'>each_element</span><span class='lparen'>(</span><span class='id identifier rubyid_local_id_tag'>local_id_tag</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_local_id_element'>local_id_element</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_local_id'>local_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_local_id'>local_id</span> <span class='op'>=</span> <span class='id identifier rubyid_local_id_element'>local_id_element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_local_id'>local_id</span> <span class='op'>!=</span> <span class='id identifier rubyid_local_id_element'>local_id_element</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span>
        <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>More than one %s tag found in one service element</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='id identifier rubyid_format'>format</span><span class='comma'>,</span> <span class='id identifier rubyid_local_id_tag'>local_id_tag</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/DiscoveryFailure.html" title="OpenID::DiscoveryFailure (class)">DiscoveryFailure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/DiscoveryFailure.html#initialize-instance_method" title="OpenID::DiscoveryFailure#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_local_id'>local_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_op_or_user_services-class_method">
  
    .<strong>get_op_or_user_services</strong>(openid_services)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 371</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_op_or_user_services'>get_op_or_user_services</span><span class='lparen'>(</span><span class='id identifier rubyid_openid_services'>openid_services</span><span class='rparen'>)</span>
  <span class='comment'># Extract OP Identifier services.  If none found, return the rest,
</span>  <span class='comment'># sorted with most preferred first according to
</span>  <span class='comment'># OpenIDServiceEndpoint.openid_type_uris.
</span>  <span class='comment'>#
</span>  <span class='comment'># openid_services is a list of OpenIDServiceEndpoint objects.
</span>  <span class='comment'>#
</span>  <span class='comment'># Returns a list of OpenIDServiceEndpoint objects.
</span>
  <span class='id identifier rubyid_op_services'>op_services</span> <span class='op'>=</span> <span class='id identifier rubyid_arrange_by_type'>arrange_by_type</span><span class='lparen'>(</span><span class='id identifier rubyid_openid_services'>openid_services</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="#OPENID_IDP_2_0_TYPE-constant" title="OpenID::OPENID_IDP_2_0_TYPE (constant)">OPENID_IDP_2_0_TYPE</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_openid_services'>openid_services</span> <span class='op'>=</span> <span class='id identifier rubyid_arrange_by_type'>arrange_by_type</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_openid_services'>openid_services</span><span class='comma'>,</span>
    <span class='const'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html" title="OpenID::OpenIDServiceEndpoint (class)">OpenIDServiceEndpoint</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="OpenID/OpenIDServiceEndpoint.html#OPENID_TYPE_URIS-constant" title="OpenID::OpenIDServiceEndpoint::OPENID_TYPE_URIS (constant)">OPENID_TYPE_URIS</a></span></span><span class='comma'>,</span>
  <span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_op_services'>op_services</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_op_services'>op_services</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_openid_services'>openid_services</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_secret_size-class_method">
  
    .<strong>get_secret_size</strong>(assoc_type)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/association.rb', line 7</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_secret_size'>get_secret_size</span><span class='lparen'>(</span><span class='id identifier rubyid_assoc_type'>assoc_type</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_assoc_type'>assoc_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HMAC-SHA1</span><span class='tstring_end'>&quot;</span></span>
    <span class='int'>20</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_assoc_type'>assoc_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HMAC-SHA256</span><span class='tstring_end'>&quot;</span></span>
    <span class='int'>32</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unsupported association type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_assoc_type'>assoc_type</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_sreg_ns-class_method">
  
    .<strong>get_sreg_ns</strong>(message)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Extract the simple registration namespace URI from the given<br />
OpenID message. Handles OpenID 1 and 2, as well as both sreg<br />
namespace URIs found in the wild, as well as missing namespace<br />
definitions (for OpenID 1)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/sreg.rb', line 45</span>

<span class='kw'>def</span> <span class='const'><span class='object_link'><a href="" title="OpenID (module)">OpenID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_sreg_ns'>get_sreg_ns</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='const'>NS_URI_1_1</span><span class='comma'>,</span> <span class='const'>NS_URI_1_0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_ns'>ns</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_ns'>ns</span> <span class='kw'>if</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_namespaces'>namespaces</span><span class='period'>.</span><span class='id identifier rubyid_get_alias'>get_alias</span><span class='lparen'>(</span><span class='id identifier rubyid_ns'>ns</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='comment'># try to add an alias, since we didn&#39;t find one
</span>  <span class='id identifier rubyid_ns'>ns</span> <span class='op'>=</span> <span class='const'>NS_URI_1_1</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_namespaces'>namespaces</span><span class='period'>.</span><span class='id identifier rubyid_add_alias'>add_alias</span><span class='lparen'>(</span><span class='id identifier rubyid_ns'>ns</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sreg</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>IndexError</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NamespaceError</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_ns'>ns</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="link_has_rel-class_method">
  
    .<strong>link_has_rel</strong>(link_attrs, target_rel)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 108</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_link_has_rel'>link_has_rel</span><span class='lparen'>(</span><span class='id identifier rubyid_link_attrs'>link_attrs</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span>
  <span class='comment'># Does this link have target_rel as a relationship?
</span>
  <span class='comment'># XXX: TESTME
</span>  <span class='id identifier rubyid_rel_attr'>rel_attr</span> <span class='op'>=</span> <span class='id identifier rubyid_link_attrs'>link_attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rel</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_rel_attr'>rel_attr</span> <span class='kw'>and</span> <span class='id identifier rubyid_rel_matches'>rel_matches</span><span class='lparen'>(</span><span class='id identifier rubyid_rel_attr'>rel_attr</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="make_kv_post-class_method">
  
    .<strong>make_kv_post</strong>(request_message, server_url)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Send the message to the server via HTTP POST and receive and parse<br />
a response in KV Form</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/kvpost.rb', line 54</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_make_kv_post'>make_kv_post</span><span class='lparen'>(</span><span class='id identifier rubyid_request_message'>request_message</span><span class='comma'>,</span> <span class='id identifier rubyid_server_url'>server_url</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_http_response'>http_response</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='id identifier rubyid_server_url'>server_url</span><span class='comma'>,</span> <span class='id identifier rubyid_request_message'>request_message</span><span class='period'>.</span><span class='id identifier rubyid_to_url_encoded'>to_url_encoded</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/KVPostNetworkError.html" title="OpenID::KVPostNetworkError (class)">KVPostNetworkError</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Unable to contact OpenID server: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='const'><span class='object_link'><a href="OpenID/Message.html" title="OpenID::Message (class)">Message</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_http_response'><span class='object_link'><a href="OpenID/Message.html#from_http_response-class_method" title="OpenID::Message.from_http_response (method)">from_http_response</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_http_response'>http_response</span><span class='comma'>,</span> <span class='id identifier rubyid_server_url'>server_url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_url-class_method">
  
    .<strong>normalize_url</strong>(url)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 320</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_normalize_url'>normalize_url</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='comment'># Normalize a URL, converting normalization failures to
</span>  <span class='comment'># DiscoveryFailure
</span>
  <span class='id identifier rubyid_normalized'>normalized</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="OpenID/URINorm.html" title="OpenID::URINorm (module)">URINorm</a></span></span><span class='period'>.</span><span class='id identifier rubyid_urinorm'><span class='object_link'><a href="OpenID/URINorm.html#urinorm-class_method" title="OpenID::URINorm.urinorm (method)">urinorm</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
<span class='kw'>rescue</span> <span class='const'>URI</span><span class='op'>::</span><span class='const'>Error</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'><span class='object_link'><a href="OpenID/DiscoveryFailure.html" title="OpenID::DiscoveryFailure (class)">DiscoveryFailure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="OpenID/DiscoveryFailure.html#initialize-instance_method" title="OpenID::DiscoveryFailure#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error normalizing </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_url'>url</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>else</span>
  <span class='id identifier rubyid_defragged'>defragged</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_normalized'>normalized</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_defragged'>defragged</span><span class='period'>.</span><span class='id identifier rubyid_fragment'>fragment</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_defragged'>defragged</span><span class='period'>.</span><span class='id identifier rubyid_normalize'>normalize</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_xri-class_method">
  
    .<strong>normalize_xri</strong>(xri)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315
316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/discovery.rb', line 313</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_normalize_xri'>normalize_xri</span><span class='lparen'>(</span><span class='id identifier rubyid_xri'>xri</span><span class='rparen'>)</span>
  <span class='comment'># Normalize an XRI, stripping its scheme if present
</span>  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^xri://(.*)</span><span class='regexp_end'>}</span></span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='id identifier rubyid_xri'>xri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_xri'>xri</span> <span class='op'>=</span> <span class='id identifier rubyid_m'>m</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span>
  <span class='id identifier rubyid_xri'>xri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="openid_unescape-class_method">
  
    .<strong>openid_unescape</strong>(s)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 22</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_openid_unescape'>openid_unescape</span><span class='lparen'>(</span><span class='id identifier rubyid_s'>s</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_link_attrs-class_method">
  
    .<strong>parse_link_attrs</strong>(html)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 34</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_parse_link_attrs'>parse_link_attrs</span><span class='lparen'>(</span><span class='id identifier rubyid_html'>html</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_stripped'>stripped</span> <span class='op'>=</span> <span class='id identifier rubyid_html'>html</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#REMOVED_RE-constant" title="OpenID::REMOVED_RE (constant)">REMOVED_RE</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_stripped'>stripped</span> <span class='op'>=</span> <span class='id identifier rubyid_html'>html</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>binary</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>invalid:</span> <span class='symbol'>:replace</span><span class='comma'>,</span> <span class='label'>undef:</span> <span class='symbol'>:replace</span><span class='comma'>,</span> <span class='label'>replace:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span>
        <span class='const'><span class='object_link'><a href="#REMOVED_RE-constant" title="OpenID::REMOVED_RE (constant)">REMOVED_RE</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UndefinedConversionError</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ConverterNotFoundError</span>
      <span class='comment'># needed for a problem in JRuby where it can&#39;t handle the conversion.
</span>      <span class='comment'># see details here: https://github.com/jruby/jruby/issues/829
</span>      <span class='id identifier rubyid_stripped'>stripped</span> <span class='op'>=</span> <span class='id identifier rubyid_html'>html</span><span class='period'>.</span><span class='id identifier rubyid_encode'>encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>invalid:</span> <span class='symbol'>:replace</span><span class='comma'>,</span> <span class='label'>undef:</span> <span class='symbol'>:replace</span><span class='comma'>,</span> <span class='label'>replace:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span>
        <span class='const'><span class='object_link'><a href="#REMOVED_RE-constant" title="OpenID::REMOVED_RE (constant)">REMOVED_RE</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="HTMLTokenizer.html" title="HTMLTokenizer (class)">HTMLTokenizer</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="HTMLTokenizer.html#initialize-instance_method" title="HTMLTokenizer#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_stripped'>stripped</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_links'>links</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='comment'># to keep track of whether or not we are in the head element
</span>  <span class='id identifier rubyid_in_head'>in_head</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_in_html'>in_html</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_saw_head'>saw_head</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>begin</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_el'>el</span> <span class='op'>=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_getTag'>getTag</span><span class='lparen'>(</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>head</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/head</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>link</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>body</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/body</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/html</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='rparen'>)</span>

      <span class='comment'># we are leaving head or have reached body, so we bail
</span>      <span class='kw'>return</span> <span class='id identifier rubyid_links'>links</span> <span class='kw'>if</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/head</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>body</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/body</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/html</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span><span class='lparen'>(</span><span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_tag_name'>tag_name</span><span class='rparen'>)</span>

      <span class='comment'># enforce html &gt; head &gt; link
</span>      <span class='id identifier rubyid_in_html'>in_html</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_tag_name'>tag_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_in_html'>in_html</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_tag_name'>tag_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>head</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_saw_head'>saw_head</span>
          <span class='kw'>return</span> <span class='id identifier rubyid_links'>links</span> <span class='comment'># only allow one head
</span>        <span class='kw'>end</span>

        <span class='id identifier rubyid_saw_head'>saw_head</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_in_head'>in_head</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>47</span> <span class='comment'># tag ends with a /: a short tag
</span>      <span class='kw'>end</span>
      <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_in_head'>in_head</span>

      <span class='kw'>return</span> <span class='id identifier rubyid_links'>links</span> <span class='kw'>if</span> <span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_tag_name'>tag_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html</span><span class='tstring_end'>&quot;</span></span>

      <span class='id identifier rubyid_links'>links</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_unescape_hash'>unescape_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_attr_hash'>attr_hash</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_el'>el</span><span class='period'>.</span><span class='id identifier rubyid_tag_name'>tag_name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>link</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='comment'># just stop parsing if there&#39;s an error
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_links'>links</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rel_matches-class_method">
  
    .<strong>rel_matches</strong>(rel_attr, target_rel)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 96</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_rel_matches'>rel_matches</span><span class='lparen'>(</span><span class='id identifier rubyid_rel_attr'>rel_attr</span><span class='comma'>,</span> <span class='id identifier rubyid_target_rel'>target_rel</span><span class='rparen'>)</span>
  <span class='comment'># Does this target_rel appear in the rel_str?
</span>  <span class='comment'># XXX: TESTME
</span>  <span class='id identifier rubyid_rels'>rels</span> <span class='op'>=</span> <span class='id identifier rubyid_rel_attr'>rel_attr</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span>
  <span class='id identifier rubyid_rels'>rels</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rel'>rel</span><span class='op'>|</span>
    <span class='id identifier rubyid_rel'>rel</span> <span class='op'>=</span> <span class='id identifier rubyid_rel'>rel</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_rel'>rel</span> <span class='op'>==</span> <span class='id identifier rubyid_target_rel'>target_rel</span>
  <span class='kw'>end</span>

  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="supports_sreg?-class_method">
  
    .<strong>supports_sreg?</strong>(endpoint)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Does the given endpoint advertise support for simple registration?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/extensions/sreg.rb', line 37</span>

<span class='kw'>def</span> <span class='const'><span class='object_link'><a href="" title="OpenID (module)">OpenID</a></span></span><span class='period'>.</span><span class='id identifier rubyid_supports_sreg?'>supports_sreg?</span><span class='lparen'>(</span><span class='id identifier rubyid_endpoint'>endpoint</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_uses_extension'>uses_extension</span><span class='lparen'>(</span><span class='const'>NS_URI_1_1</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_endpoint'>endpoint</span><span class='period'>.</span><span class='id identifier rubyid_uses_extension'>uses_extension</span><span class='lparen'>(</span><span class='const'>NS_URI_1_0</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unescape_hash-class_method">
  
    .<strong>unescape_hash</strong>(h)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openid/consumer/html_parse.rb', line 26</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_unescape_hash'>unescape_hash</span><span class='lparen'>(</span><span class='id identifier rubyid_h'>h</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_newh'>newh</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_h'>h</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span>
    <span class='id identifier rubyid_newh'>newh</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_openid_unescape'>openid_unescape</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_newh'>newh</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jun 10 09:45:39 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.3).
</div>

    </div>
  </body>
</html>